# Requires: Python 3.10+ on PATH, NSIS (for installer test), and git-bash or PowerShell\r\n# Run from repo root in a Windows shell (PowerShell).\r\n\r\nWrite-Host "== html2exe smoke test =="\r\npython -m pip install --upgrade pip\r\npython -m pip install -e ".[dev]"\r\n\r\nWrite-Host "-> Running unit tests..."\r\npytest -q\r\n\r\nWrite-Host "-> Building EXE via PyInstaller..."\r\n# Makefile target should handle the corrected ; separator\r\nmake build\r\n\r\nWrite-Host "-> Verifying output..."\r\nif (!(Test-Path -Path "dist\\HTML2exe.exe")) {\r\n  Write-Error "dist\\HTML2exe.exe not found."\r\n  exit 1\r\n}\r\n\r\nWrite-Host "-> Running EXE with a trivial HTML file..."\r\n$demo = "demo.html"\r\n@"\r\n<!doctype html>\r\n<html>\r\n  <head><meta charset='utf-8'><title>Demo</title></head>\r\n  <body style='font-family:system-ui;'>\r\n    <h1>Hello from html2exe</h1>\r\n    <p>If you see this window, basic rendering works.</p>\r\n  </body>\r\n</html>\r\n"@ | Set-Content -Path $demo -Encoding UTF8\r\n\r\n# Use the CLI to package demo if CLI supports it; otherwise just launch the viewer module if available.\r\ntry {\r\n  html2exe --input $demo --output "dist\\Demo.exe" --check\r\n} catch {\r\n  Write-Host "CLI check not available; skipping."\r\n}\r\n\r\nWrite-Host "-> Optional: build NSIS installer (requires makensis on PATH)"\r\ntry {\r\n  make dist\r\n} catch {\r\n  Write-Host "NSIS not installed or Makefile target missing; skipping."\r\n}\r\n\r\nWrite-Host "== Smoke test complete =="\r\nexit 0
